{"version":3,"file":"PermissionInclude.js","sources":["PermissionInclude.jsx"],"names":[],"mappings":"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","sourceRoot":"/source/","sourcesContent":["var Keys = {\n    ENTER: 13,\n    TAB: 9,\n    BACKSPACE: 8,\n    UP_ARROW: 38,\n    DOWN_ARROW: 40,\n    ESCAPE: 27\n};\n\nvar PermissionInclude = React.createClass({\n    displayName: 'PermissionInclude',\n\n    propTypes: {\n        selectedGroup: React.PropTypes.array,\n        selectedMember: React.PropTypes.array,\n        placeholder: React.PropTypes.string,\n        suggestion: React.PropTypes.array,\n\n        groups: React.PropTypes.array,\n        handleGroupDelete: React.PropTypes.func.isRequired,\n        handleMemberDelete: React.PropTypes.func.isRequired,\n        handleAddition: React.PropTypes.func.isRequired\n    },\n    getDefaultProps: function () {\n        return {\n            placeholder: 'Input group or member',\n            selectedGroup: [],\n            selectedMember: [],\n            groupSuggestions: [],\n            memberSuggestions: []\n        };\n    },\n    componentDidMount: function () {\n    },\n    getInitialState: function () {\n        return {\n            suggestions: [],\n            groupSuggestions: [],\n            memberSuggestions: [],\n            query: '',\n            selectedIndex: -1,\n            selectionMode: false,\n            searchingCnt : 0\n        };\n    },\n    handleGroupDelete: function (i, e) {\n        this.props.handleGroupDelete(i);\n        this.setState({ query: '' });\n    },\n    handleMemberDelete: function (i, e) {\n        this.props.handleMemberDelete(i);\n        this.setState({ query: '' });\n    },\n    handleChange: function (e)\n    {\n        var query = e.target.value.trim();\n\n        this.setState({\n            query: query\n        });\n\n        if(query.length > 0){\n            var identifier = query.substr(0, 1);\n            switch (identifier){\n                case \"@\":\n                    query = query.substr(1, query.length);\n                    this.searchMember(query);\n                    break;\n                case \"%\":\n                    query = query.substr(1, query.length);\n                    this.searchGroup(query);\n                    break;\n                default :\n                    break;\n            }\n        }else{\n            this.setState({\n                query : '',\n                suggestions : [],\n                searchingCnt : 0\n            });\n        }\n    },\n    searchMember: function (keyword) {\n\n        var searchMemberUrl = this.props.searchMemberUrl;\n        var self = this;\n        var searchingCnt = this.state.searchingCnt + 1;\n        self.setState({\n            searchingCnt : searchingCnt\n        });\n\n        $.ajax({\n            url: searchMemberUrl + '/' + keyword,\n            method:'get',\n            dataType: 'json',\n            cache: false,\n            success: function (data) {\n                var searchingCnt = self.state.searchingCnt;\n                searchingCnt = searchingCnt - 1;\n                self.setState(\n                    {\n                        suggestions : data,\n                        searchingCnt : searchingCnt\n                    }\n                );\n            }.bind(self),\n            error: function (xhr, status, err) {\n                var searchingCnt = self.state.searchingCnt;\n                searchingCnt = searchingCnt - 1;\n                self.setState(\n                    {\n                        searchingCnt : searchingCnt\n                    }\n                );\n                console.error(searchMemberUrl, status, err.toString());\n            }.bind(self)\n        });\n\n    },\n\n    searchGroup: function (keyword) {\n\n        var searchGroupUrl = this.props.searchGroupUrl;\n        var self = this;\n        var searchingCnt = this.state.searchingCnt + 1;\n        self.setState({\n            searchingCnt : searchingCnt\n        });\n\n        $.ajax({\n            url: searchGroupUrl + '/' + keyword,\n            method:'get',\n            dataType: 'json',\n            cache: false,\n            success: function (data) {\n                var searchingCnt = self.state.searchingCnt;\n                searchingCnt = searchingCnt - 1;\n                self.setState(\n                    {\n                        suggestions : data,\n                        searchingCnt : searchingCnt\n                    }\n                );\n            }.bind(self),\n            error: function (xhr, status, err) {\n                var searchingCnt = self.state.searchingCnt;\n                searchingCnt = searchingCnt - 1;\n                self.setState(\n                    {\n                        searchingCnt : searchingCnt\n                    }\n                );\n                console.error(searchGroupUrl, status, err.toString());\n            }.bind(self)\n        });\n\n    },\n\n    handleKeyDown: function(e) {\n        var _state = this.state;\n        var query = _state.query;\n        var selectedIndex = _state.selectedIndex;\n        var suggestions = _state.suggestions;\n\n        // hide suggestions menu on escape\n        if (e.keyCode === Keys.ESCAPE) {\n            e.preventDefault();\n            this.setState({\n                selectedIndex: -1,\n                selectionMode: false,\n                suggestions: []\n            });\n        }\n\n        // when enter or tab is pressed add query to tags\n        if ((e.keyCode === Keys.ENTER || e.keyCode === Keys.TAB) && query != '') {\n            e.preventDefault();\n            if (this.state.selectionMode) {\n                this.addTag(this.state.suggestions[this.state.selectedIndex]);\n            }\n        }\n\n        // when backspace key is pressed and query is blank, delete tag\n        if (e.keyCode === Keys.BACKSPACE && query == '') {\n            if(this.props.selectedMember.length > 0 )\n                this.handleMemberDelete(this.props.selectedMember.length - 1);\n            else\n                this.handleGroupDelete(this.props.selectedGroup.length - 1);\n        }\n\n        // up arrow\n        if (e.keyCode === Keys.UP_ARROW) {\n            e.preventDefault();\n            // last item, cycle to the top\n            if (selectedIndex <= 0) {\n                this.setState({\n                    selectedIndex: this.state.suggestions.length - 1,\n                    selectionMode: true\n                });\n            } else {\n                this.setState({\n                    selectedIndex: selectedIndex - 1,\n                    selectionMode: true\n                });\n            }\n        }\n\n        // down arrow\n        if (e.keyCode === Keys.DOWN_ARROW) {\n            e.preventDefault();\n            this.setState({\n                selectedIndex: (this.state.selectedIndex + 1) % suggestions.length,\n                selectionMode: true\n            });\n        }\n    },\n    addTag: function (tag) {\n        var input = this.refs.input.getDOMNode();\n\n        // call method to add\n        this.props.handleAddition(tag);\n\n        // reset the state\n        this.setState({\n            query: '',\n            selectionMode: false,\n            selectedIndex: -1\n        });\n\n        // focus back on the input box\n        input.value = '';\n        input.focus();\n    },\n    handleSuggestionClick: function(i, e) {\n        this.addTag(this.state.suggestions[i]);\n    },\n    handleSuggestionHover: function(i, e) {\n        this.setState({\n            selectedIndex: i,\n            selectionMode: true\n        });\n    },\n\n    render: function() {\n        var groupPrefix = \"%\";\n        var memberPrefix = \"@\";\n\n        var groupTagItems = this.props.selectedGroup.map((function (tag, i) {\n            return (<PermissionTag key={tag.id} tag={tag} prefix={groupPrefix}\n                         onDelete={this.handleGroupDelete.bind(this, i)}\n                />);\n        }).bind(this));\n\n        var memberTagItems = this.props.selectedMember.map((function (tag, i) {\n            return (<PermissionTag key={tag.id} tag={tag} prefix={memberPrefix}\n                         onDelete={this.handleMemberDelete.bind(this, i)}\n                />);\n        }).bind(this));\n\n        var query = this.state.query.trim(),\n            selectedIndex = this.state.selectedIndex,\n\n            suggestions = this.state.suggestions,\n            placeholder = this.props.placeholder;\n\n        return( <div className=\"ReactTags__tags\">\n                <div className=\"ReactTags__selected\">\n                    {groupTagItems}\n                </div>\n                <div className=\"ReactTags__selected\">\n                    {memberTagItems}\n                </div>\n                    <div className=\"ReactTags__tagInput\">\n                        <input type=\"text\" ref=\"input\" placeholder={placeholder}\n                               className=\"form-control\" disabled={this.props.disabled}\n                               value={this.state.query}\n                               onChange={this.handleChange} onKeyDown={this.handleKeyDown}/>\n                        <PermissionTagSuggestion query={query}\n                            suggestions={suggestions}\n                                       searchingCnt={this.state.searchingCnt}\n                            selectedIndex={selectedIndex}\n                            handleClick={this.handleSuggestionClick}\n                            handleHover={this.handleSuggestionHover}/>\n                    </div>\n            </div>\n        );\n    }\n});\n"]}