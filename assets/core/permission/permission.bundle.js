webpackJsonp([2],{215:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=a(4),r=s(n),l=a(9),i=s(l),d=a(69),u=s(d);$(".__xe__uiobject_permission").each(function(e){var t=$(this),a=t.data("data"),s=t.data("key"),n=t.data("type"),l=t.data("memberUrl"),d=t.data("groupUrl"),o=t.data("vgroupAll");i.default.render(r.default.createElement(u.default,{key:s,memberSearchUrl:l,groupSearchUrl:d,permission:a,type:n,vgroupAll:o}),this)})},216:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),r=s(n),l=a(36),i=s(l),d=a(35),u=s(d),o=a(37),c=s(o);t.default=r.default.createClass({displayName:"Permission",propTypes:{permission:r.default.PropTypes.object,type:r.default.PropTypes.string},getDefaultProps:function(){return{modeEnable:!1}},getInitialState:function(){return this.init(this.props)},init:function(e){var t,a,s=e.permission,n=[],r=[],l=[];return s&&(t=s.mode,a=s.rating,n=s.group,r=s.user,l=s.except),{permission:s,modeEnable:this.props.modeEnable,formData:{mode:t,rating:a},includeGroups:n,includeMembers:r,excludeMembers:l}},componentDidMount:function(){},componentDidUpdate:function(e){this.props.permission!==e.permission&&this.setState(this.init(this.props))},inputChange:function(e,t){var a=t.target.value,s=this.state.formData;s[e]=a,this.setState({formData:s})},handleIncludeGroupDelete:function(e){var t=this.state.includeGroups;t.splice(e,1),this.setState({includeGroups:t})},handleIncludeMemberDelete:function(e){var t=this.state.includeMembers;t.splice(e,1),this.setState({includeMembers:t})},handleExcludeMemberDelete:function(e){var t=this.state.excludeMembers;t.splice(e,1),this.setState({excludeMembers:t})},handleIncludeAddition:function(e){var t=this.state.includeGroups,a=this.state.includeMembers;e.hasOwnProperty("displayName")?_.find(a,{id:e.id})||(a.push(e),this.setState({includeMembers:a})):_.find(t,{id:e.id})||(t.push(e),this.setState({includeGroups:t}))},handleExcludeAddition:function(e){var t=this.state.excludeMembers;_.find(t,{id:e.id})||(t.push(e),this.setState({excludeMembers:t}))},render:function(){var e=this,t=this.props.type+"Rating",a=this.props.type+"Group",s=this.props.type+"User",n=this.props.type+"Except",l=this.props.type+"VGroup[]",d=this.state.formData.mode,o=this.state.formData.rating,p=!1;"manual"!==d&&"inherit"!==d||"manual"!==d&&(p=!0);var h=[{value:"super",name:"Super"},{value:"manager",name:"Manager"},{value:"member",name:"Member"},{value:"guest",name:"Guest"}],m=this.props.vgroupAll.length<1?null:this.props.vgroupAll.map(function(e){var t={type:"checkbox",disabled:p,name:l,value:e.id,key:e.id};return-1!=function(e,t){for(var a=0;a<t.length;a++)if(t[a]==e)return a;return-1}(e.id,this.props.permission.vgroup)&&(t.defaultChecked=!0),r.default.createElement("label",null,r.default.createElement("input",t)," ",e.title,"  ")}.bind(this)),f=this.state.includeGroups.map(function(e){return e.id}),g=this.state.includeMembers.map(function(e){return e.id}),b=this.state.excludeMembers.map(function(e){return e.id});return r.default.createElement("div",null,r.default.createElement("div",null,r.default.createElement("label",null,"Rating  ",r.default.createElement("i",{className:"fa fa-info-circle","data-toggle":"popover","data-content":"권한의 등급을 설정합니다."})),r.default.createElement("br",null),h.map(function(a,s){var n=a.value===o;return r.default.createElement(c.default,{data:a,name:t,isChekced:n,controlDisabled:p,key:s,onChangeRadio:e.inputChange})})),r.default.createElement("div",null,r.default.createElement("label",null,"Include Group and User ",r.default.createElement("i",{className:"fa fa-info-circle","data-toggle":"popover","data-content":"포함하고자 하는 대상을 지정합니다.","data-original-title":""})),r.default.createElement("br",null),r.default.createElement(i.default,{selectedGroup:this.state.includeGroups,selectedMember:this.state.includeMembers,searchMemberUrl:this.props.memberSearchUrl,searchGroupUrl:this.props.groupSearchUrl,disabled:p,handleGroupDelete:this.handleIncludeGroupDelete,handleMemberDelete:this.handleIncludeMemberDelete,handleAddition:this.handleIncludeAddition}),r.default.createElement("input",{type:"hidden",name:a,className:"form-control",value:f}),r.default.createElement("input",{type:"hidden",name:s,className:"form-control",value:g})),function(){if(m)return r.default.createElement("p",null,r.default.createElement("label",null,"Include Virtual Group ",r.default.createElement("i",{className:"fa fa-info-circle","data-toggle":"popover","data-content":"포함하고자 하는 대상을 지정합니다.","data-original-title":""})),r.default.createElement("br",null),m)}.call(this),r.default.createElement("div",null,r.default.createElement("label",null,"Exclude User  ",r.default.createElement("i",{className:"fa fa-info-circle","data-toggle":"popover","data-content":"제외하고자 하는 대상을 지정합니다.","data-original-title":""})),r.default.createElement("br",null),r.default.createElement(u.default,{selectedMember:this.state.excludeMembers,searchMemberUrl:this.props.memberSearchUrl,disabled:p,handleDelete:this.handleExcludeMemberDelete,handleAddition:this.handleExcludeAddition}),r.default.createElement("input",{type:"hidden",name:n,className:"form-control",value:b})))}})},339:function(e,t,a){a(69),a(35),a(36),a(37),a(215),a(38),a(39),e.exports=a(216)},35:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),r=s(n),l=a(9),i=s(l),d=a(39),u=s(d),o=a(38),c=s(o),p={ENTER:13,TAB:9,BACKSPACE:8,UP_ARROW:38,DOWN_ARROW:40,ESCAPE:27};t.default=r.default.createClass({displayName:"PermissionExclude",propTypes:{selectedMember:r.default.PropTypes.array,placeholder:r.default.PropTypes.string,suggestions:r.default.PropTypes.array,handleDelete:r.default.PropTypes.func.isRequired,handleAddition:r.default.PropTypes.func.isRequired},getDefaultProps:function(){return{placeholder:XE.Lang.trans("xe::explainExcludeUser"),selectedMember:[],suggestions:[]}},componentDidMount:function(){},getInitialState:function(){return{suggestions:[],query:"",selectedIndex:-1,selectionMode:!1,searchingCnt:0}},handleDelete:function(e,t){this.props.handleDelete(e),this.setState({query:""})},handleChange:function(e){var t=e.target.value.trim();if(this.setState({query:t}),"@"==t.substr(0,1)){var a=t.substr(1,t.length);this.searchMember(a)}else this.setState({suggestions:[],searchingCnt:0})},searchMember:function(e){var t=this.props.searchMemberUrl,a=this,s=this.state.searchingCnt+1;a.setState({searchingCnt:s}),$.ajax({url:t+"/"+e,method:"get",dataType:"json",cache:!1,success:function(e){var t=a.state.searchingCnt;t-=1,a.setState({suggestions:e,searchingCnt:t})}.bind(a),error:function(e,s,n){var r=a.state.searchingCnt;r-=1,a.setState({searchingCnt:r}),console.error(t,s,n.toString())}.bind(a)})},handleKeyDown:function(e){var t=this.state,a=t.query,s=t.selectedIndex,n=t.suggestions;e.keyCode===p.ESCAPE&&(e.preventDefault(),this.setState({selectedIndex:-1,selectionMode:!1,suggestions:[]})),e.keyCode!==p.ENTER&&e.keyCode!==p.TAB||""==a||(e.preventDefault(),this.state.selectionMode&&this.addTag(this.state.suggestions[this.state.selectedIndex])),e.keyCode===p.BACKSPACE&&""==a&&this.handleDelete(this.props.selectedMember.length-1),e.keyCode===p.UP_ARROW&&(e.preventDefault(),s<=0?this.setState({selectedIndex:this.state.suggestions.length-1,selectionMode:!0}):this.setState({selectedIndex:s-1,selectionMode:!0})),e.keyCode===p.DOWN_ARROW&&(e.preventDefault(),this.setState({selectedIndex:(this.state.selectedIndex+1)%n.length,selectionMode:!0}))},addTag:function(e){var t=i.default.findDOMNode(this.refs.input);this.props.handleAddition(e),this.setState({query:"",selectionMode:!1,selectedIndex:-1}),t.value="",t.focus()},handleSuggestionClick:function(e,t){this.addTag(this.state.suggestions[e])},handleSuggestionHover:function(e,t){this.setState({selectedIndex:e,selectionMode:!0})},render:function(){var e=this.props.selectedMember.map(function(e,t){return r.default.createElement(c.default,{key:e.id,tag:e,prefix:"@",onDelete:this.handleDelete.bind(this,t)})}.bind(this)),t=this.state.query.trim(),a=this.state.selectedIndex,s=this.state.suggestions,n=this.props.placeholder;return r.default.createElement("div",{className:"ReactTags__tags"},r.default.createElement("div",{className:"ReactTags__selected"},e),r.default.createElement("div",{className:"ReactTags__tagInput"},r.default.createElement("input",{type:"text",ref:"input",placeholder:n,className:"form-control",disabled:this.props.disabled,onChange:this.handleChange,onKeyDown:this.handleKeyDown}),r.default.createElement(u.default,{query:t,suggestions:s,searchingCnt:this.state.searchingCnt,selectedIndex:a,handleClick:this.handleSuggestionClick,handleHover:this.handleSuggestionHover})))}})},36:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),r=s(n),l=a(9),i=s(l),d=a(39),u=s(d),o=a(38),c=s(o),p={ENTER:13,TAB:9,BACKSPACE:8,UP_ARROW:38,DOWN_ARROW:40,ESCAPE:27};t.default=r.default.createClass({displayName:"PermissionInclude",propTypes:{selectedGroup:r.default.PropTypes.array,selectedMember:r.default.PropTypes.array,placeholder:r.default.PropTypes.string,suggestion:r.default.PropTypes.array,groups:r.default.PropTypes.array,handleGroupDelete:r.default.PropTypes.func.isRequired,handleMemberDelete:r.default.PropTypes.func.isRequired,handleAddition:r.default.PropTypes.func.isRequired},getDefaultProps:function(){return{placeholder:XE.Lang.trans("xe::explainIncludeUserOrGroup"),selectedGroup:[],selectedMember:[],groupSuggestions:[],memberSuggestions:[]}},componentDidMount:function(){},getInitialState:function(){return{suggestions:[],groupSuggestions:[],memberSuggestions:[],query:"",selectedIndex:-1,selectionMode:!1,searchingCnt:0}},handleGroupDelete:function(e,t){this.props.handleGroupDelete(e),this.setState({query:""})},handleMemberDelete:function(e,t){this.props.handleMemberDelete(e),this.setState({query:""})},handleChange:function(e){var t=e.target.value.trim();if(this.setState({query:t}),t.length>0){switch(t.substr(0,1)){case"@":t=t.substr(1,t.length),this.searchMember(t);break;case"%":t=t.substr(1,t.length),this.searchGroup(t)}}else this.setState({query:"",suggestions:[],searchingCnt:0})},searchMember:function(e){var t=this.props.searchMemberUrl,a=this,s=this.state.searchingCnt+1;a.setState({searchingCnt:s}),$.ajax({url:t+"/"+e,method:"get",dataType:"json",cache:!1,success:function(e){var t=a.state.searchingCnt;t-=1,a.setState({suggestions:e,searchingCnt:t})}.bind(a),error:function(e,s,n){var r=a.state.searchingCnt;r-=1,a.setState({searchingCnt:r}),console.error(t,s,n.toString())}.bind(a)})},searchGroup:function(e){var t=this.props.searchGroupUrl,a=this,s=this.state.searchingCnt+1;a.setState({searchingCnt:s}),$.ajax({url:t+"/"+e,method:"get",dataType:"json",cache:!1,success:function(e){var t=a.state.searchingCnt;t-=1,a.setState({suggestions:e,searchingCnt:t})}.bind(a),error:function(e,s,n){var r=a.state.searchingCnt;r-=1,a.setState({searchingCnt:r}),console.error(t,s,n.toString())}.bind(a)})},handleKeyDown:function(e){var t=this.state,a=t.query,s=t.selectedIndex,n=t.suggestions;e.keyCode===p.ESCAPE&&(e.preventDefault(),this.setState({selectedIndex:-1,selectionMode:!1,suggestions:[]})),e.keyCode!==p.ENTER&&e.keyCode!==p.TAB||""==a||(e.preventDefault(),this.state.selectionMode&&this.addTag(this.state.suggestions[this.state.selectedIndex])),e.keyCode===p.BACKSPACE&&""==a&&(this.props.selectedMember.length>0?this.handleMemberDelete(this.props.selectedMember.length-1):this.handleGroupDelete(this.props.selectedGroup.length-1)),e.keyCode===p.UP_ARROW&&(e.preventDefault(),s<=0?this.setState({selectedIndex:this.state.suggestions.length-1,selectionMode:!0}):this.setState({selectedIndex:s-1,selectionMode:!0})),e.keyCode===p.DOWN_ARROW&&(e.preventDefault(),this.setState({selectedIndex:(this.state.selectedIndex+1)%n.length,selectionMode:!0}))},addTag:function(e){var t=i.default.findDOMNode(this.refs.input);this.props.handleAddition(e),this.setState({query:"",selectionMode:!1,selectedIndex:-1}),t.value="",t.focus()},handleSuggestionClick:function(e,t){this.addTag(this.state.suggestions[e])},handleSuggestionHover:function(e,t){this.setState({selectedIndex:e,selectionMode:!0})},render:function(){var e=this.props.selectedGroup.map(function(e,t){return r.default.createElement(c.default,{key:e.id,tag:e,prefix:"%",onDelete:this.handleGroupDelete.bind(this,t)})}.bind(this)),t=this.props.selectedMember.map(function(e,t){return r.default.createElement(c.default,{key:e.id,tag:e,prefix:"@",onDelete:this.handleMemberDelete.bind(this,t)})}.bind(this)),a=this.state.query.trim(),s=this.state.selectedIndex,n=this.state.suggestions,l=this.props.placeholder;return r.default.createElement("div",{className:"ReactTags__tags"},r.default.createElement("div",{className:"ReactTags__selected"},e),r.default.createElement("div",{className:"ReactTags__selected"},t),r.default.createElement("div",{className:"ReactTags__tagInput"},r.default.createElement("input",{type:"text",ref:"input",placeholder:l,className:"form-control",disabled:this.props.disabled,value:this.state.query,onChange:this.handleChange,onKeyDown:this.handleKeyDown}),r.default.createElement(u.default,{query:a,suggestions:n,searchingCnt:this.state.searchingCnt,selectedIndex:s,handleClick:this.handleSuggestionClick,handleHover:this.handleSuggestionHover})))}})},37:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),n=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=n.default.createClass({displayName:"PermissionRadioComp",render:function(){return n.default.createElement("label",null,n.default.createElement("input",{type:"radio",disabled:this.props.controlDisabled,name:this.props.name,value:this.props.data.value,checked:this.props.isChecked,onChange:this.inputChange})," ",this.props.data.name,"  ")},inputChange:function(e){this.props.onChangeRadio(e.target.value)},prodTypes:{data:n.default.PropTypes.object,onChangeRadio:n.default.PropTypes.function,isChecked:n.default.PropTypes.boolean,controlDisabled:n.default.PropTypes.boolean,name:n.default.PropTypes.string}})},38:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),n=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=n.default.createClass({displayName:"PermissionTag",propTypes:{prefix:n.default.PropTypes.string,onDelete:n.default.PropTypes.func.isRequired,tag:n.default.PropTypes.object.isRequired},render:function(){var e=this.props.tag,t=e.displayName||e.name;return t=this.props.prefix+t,n.default.createElement("span",{className:"ReactTags__tag"},t,n.default.createElement("a",{className:"ReactTags__remove",onClick:this.props.onDelete},"x"))}})},39:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),n=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=n.default.createClass({displayName:"PermissionTagSuggestion",propTypes:{query:n.default.PropTypes.string.isRequired,selectedIndex:n.default.PropTypes.number.isRequired,suggestions:n.default.PropTypes.array.isRequired,handleClick:n.default.PropTypes.func.isRequired,handleHover:n.default.PropTypes.func.isRequired,searchingCnt:n.default.PropTypes.number},markIt:function(e,t){var a=t.trim().replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&"),s=RegExp(a,"gi");return{__html:(e.displayName||e.name).replace(s,"<mark>$&</mark>")}},render:function(){var e,t,a,s=this.props;return this.props.searchingCnt>0?t=n.default.createElement("ul",null,n.default.createElement("li",null,"Searching ... ",n.default.createElement("span",{className:"spinner",role:"spinner"},n.default.createElement("span",{className:"spinner-icon"})))):a=s.suggestions.map(function(e,t){return n.default.createElement("li",{key:t,onClick:s.handleClick.bind(null,t),onMouseOver:s.handleHover.bind(null,t),className:t==s.selectedIndex?"active":""},n.default.createElement("span",{dangerouslySetInnerHTML:this.markIt(e,s.query)}))}.bind(this)),e=n.default.createElement("ul",null,a),a&&0===a.length||s.query.length<2?n.default.createElement("div",{className:"ReactTags__suggestions"}):n.default.createElement("div",{className:"ReactTags__suggestions"},t,e)}})},69:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),r=s(n),l=a(37),i=s(l),d=a(36),u=s(d),o=a(35),c=s(o);t.default=r.default.createClass({displayName:"Permission",propTypes:{permission:r.default.PropTypes.object,type:r.default.PropTypes.string},getDefaultProps:function(){return{modeEnable:!1}},getInitialState:function(){return this.init(this.props)},init:function(e){var t,a,s=e.permission,n=[],r=[],l=[];return s&&(t=s.mode,a=s.rating,n=s.group,r=s.user,l=s.except),{permission:s,modeEnable:this.props.modeEnable,formData:{mode:t,rating:a},includeGroups:n,includeMembers:r,excludeMembers:l}},componentDidMount:function(){},componentDidUpdate:function(e){this.props.permission!==e.permission&&this.setState(this.init(this.props))},modeChange:function(e){var t=this.state.formData;t.mode="inherit"===t.mode?"manual":"inherit",this.setState({formData:t})},inputChange:function(e,t){var a=this.state.formData;a[e]=t,this.setState({formData:a})},handleIncludeGroupDelete:function(e){var t=this.state.includeGroups;t.splice(e,1),this.setState({includeGroups:t})},handleIncludeMemberDelete:function(e){var t=this.state.includeMembers;t.splice(e,1),this.setState({includeMembers:t})},handleExcludeMemberDelete:function(e){var t=this.state.excludeMembers;t.splice(e,1),this.setState({excludeMembers:t})},handleIncludeAddition:function(e){var t=this.state.includeGroups,a=this.state.includeMembers;e.hasOwnProperty("displayName")?_.find(a,{id:e.id})||(a.push(e),this.setState({includeMembers:a})):_.find(t,{id:e.id})||(t.push(e),this.setState({includeGroups:t}))},handleExcludeAddition:function(e){var t=this.state.excludeMembers;_.find(t,{id:e.id})||(t.push(e),this.setState({excludeMembers:t}))},render:function(){var e=this,t=this.props.modeEnable,a=this.props.type+"Mode",s=this.props.type+"Rating",n=this.props.type+"Group",l=this.props.type+"User",d=this.props.type+"Except",o=this.props.type+"VGroup[]",p=this.state.formData.mode,h=this.state.formData.rating,m=!1;"manual"!==p&&"inherit"!==p||(t=!0,"manual"!==p&&(m=!0));var f,g=[{value:"super",name:XE.Lang.trans("xe::memberRatingAdministrator")},{value:"manager",name:XE.Lang.trans("xe::memberRatingManager")},{value:"member",name:XE.Lang.trans("xe::member")},{value:"guest",name:XE.Lang.trans("xe::guest")}],b=g.map(function(t,a){return t.value==h?r.default.createElement(i.default,{data:t,name:s,isChecked:!0,controlDisabled:m,key:a,onChangeRadio:e.inputChange.bind(null,"rating")}):r.default.createElement(i.default,{data:t,name:s,isChecked:!1,controlDisabled:m,key:a,onChangeRadio:e.inputChange.bind(null,"rating")})}),y=this.props.vgroupAll.length<1?null:this.props.vgroupAll.map(function(e){var t={type:"checkbox",disabled:m,name:o,value:e.id,key:e.id};return-1!=function(e,t){for(var a=0;a<t.length;a++)if(t[a]==e)return a;return-1}(e.id,this.props.permission.vgroup)&&(t.defaultChecked=!0),r.default.createElement("label",null,r.default.createElement("input",t)," ",e.title,"  ")}.bind(this)),v=this.state.includeGroups.map(function(e){return e.id}),E=this.state.includeMembers.map(function(e){return e.id}),M=this.state.excludeMembers.map(function(e){return e.id});return t&&(f=r.default.createElement("div",{className:"form-group"},r.default.createElement("div",{className:"checkbox"},r.default.createElement("label",null,r.default.createElement("input",{type:"checkbox",name:a,value:"inherit",onChange:this.modeChange,checked:"inherit"===p})," ",XE.Lang.trans("xe::inheritMode"))))),r.default.createElement("div",null,f,r.default.createElement("div",{className:"form-group"},r.default.createElement("label",null,XE.Lang.trans("xe::memberRating")),r.default.createElement("div",{className:"radio"},b)),r.default.createElement("div",{className:"form-group"},r.default.createElement("label",null,XE.Lang.trans("xe::includeUserOrGroup")),r.default.createElement(u.default,{selectedGroup:this.state.includeGroups,selectedMember:this.state.includeMembers,searchMemberUrl:this.props.memberSearchUrl,searchGroupUrl:this.props.groupSearchUrl,disabled:m,handleGroupDelete:this.handleIncludeGroupDelete,handleMemberDelete:this.handleIncludeMemberDelete,handleAddition:this.handleIncludeAddition}),r.default.createElement("input",{type:"hidden",name:n,className:"form-control",value:v}),r.default.createElement("input",{type:"hidden",name:l,className:"form-control",value:E})),function(){if(y)return r.default.createElement("div",{className:"form-group"},r.default.createElement("label",null,XE.Lang.trans("xe::includeVGroup")),y)}.call(this),r.default.createElement("div",{className:"form-group"},r.default.createElement("label",null,XE.Lang.trans("xe::excludeUser")),r.default.createElement(c.default,{selectedMember:this.state.excludeMembers,searchMemberUrl:this.props.memberSearchUrl,disabled:m,handleDelete:this.handleExcludeMemberDelete,handleAddition:this.handleExcludeAddition}),r.default.createElement("input",{type:"hidden",name:d,className:"form-control",value:M})))}})}},[339]);