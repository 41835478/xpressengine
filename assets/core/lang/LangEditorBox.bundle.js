webpackJsonp([0],[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var l=a(1),i=n(l),s=a(30),r=n(s),o=i.default.createClass({displayName:"LangEditorBox",getDefaultProps:function(){return{name:"",langKey:"",multiline:!1,lines:[],autocomplete:!1}},render:function(){return u.seq++,i.default.createElement(u,{key:u.seq,seq:u.seq,name:this.props.name,langKey:this.props.langKey,multiline:this.props.multiline,lines:this.props.lines,autocomplete:this.props.autocomplete})}}),u=i.default.createClass({displayName:"LangEditor",statics:{seq:0},getInitialState:function(){var e=this.props.lines||[];return{lines:e}},setLines:function(e){var t=this;t.setState({lines:e}),XE.Lang.locales.map(function(e){var a="#input-"+t.props.seq+"-"+e,n=t.getValueFromLinesWithLocale(e);$(a).val(n)})},getValueFromLinesWithLocale:function(e){for(var t=this.state.lines,a=t.length,n={};a--;)if(n=t[a],n.locale==e)return n.value;return""},componentDidMount:function(){if(this.isMounted()){var e=this,t=r.default.findDOMNode(this);this.props.langKey&&0==this.state.lines.length&&$.ajax({type:"get",dataType:"json",url:xeBaseURL+"/"+XE.options.managePrefix+"/lang/lines/"+this.props.langKey,success:function(t){this.isMounted()&&e.setLines(t)}.bind(this)}),this.props.autocomplete&&$(t).find("input[type=text]:first,textarea:first").autocomplete({source:"/"+XE.options.managePrefix+"/lang/search/"+XE.Lang.locales[0],minLength:1,focus:function(e,t){e.preventDefault()},select:function(t,a){e.setLines(a.item.lines)}})}},getEditor:function(e,t,a){var n=null,l="input-"+this.props.seq+"-"+t,s=e+"/locale/"+t;return n=this.props.multiline?i.default.createElement("textarea",{className:"form-control",id:l,name:s,defaultValue:a}):i.default.createElement("input",{type:"text",className:"form-control",id:l,name:s,defaultValue:a})},render:function(){var e=this,t=XE.Lang.locales[0],a=XE.Lang.locales.slice(1),n="xe_lang_preprocessor://lang/seq/"+this.props.seq,l=this.getValueFromLinesWithLocale(t),s=this.props.multiline?"textarea":"text",r=this.props.multiline?i.default.createElement("input",{type:"hidden",name:n+"/multiline",defaultValue:"true"}):null;return i.default.createElement("div",{className:s},i.default.createElement("input",{type:"hidden",name:"xe_use_request_preprocessor",value:"Y"}),i.default.createElement("input",{type:"hidden",name:n+"/name",defaultValue:this.props.name}),i.default.createElement("input",{type:"hidden",name:n+"/key",defaultValue:this.props.langKey}),r,i.default.createElement("input",{type:"hidden",name:this.props.name,defaultValue:this.props.langKey}),i.default.createElement("div",{key:t,className:"input-group"},e.getEditor(n,t,l),i.default.createElement("span",{className:"input-group-addon"},i.default.createElement("span",{className:"flag-code"},i.default.createElement("i",{className:t+" xe-flag"}),t))),i.default.createElement("div",{className:"sub"},a.map(function(t,a){var l=e.getValueFromLinesWithLocale(t);return i.default.createElement("div",{key:t,className:"input-group"},e.getEditor(n,t,l),i.default.createElement("span",{className:"input-group-addon"},i.default.createElement("span",{className:"flag-code"},i.default.createElement("i",{className:t+" xe-flag"}),t)))})))}});window.langEditorBoxRender=function(e){var t=e.data("name"),a=e.data("lang-key"),n=e.data("multiline"),l=e.data("lines"),s=e.data("autocomplete");r.default.render(i.default.createElement(o,{name:t,langKey:a,multiline:n,lines:l,autocomplete:s}),e[0])},$(function(){$(".lang-editor-box").each(function(e){langEditorBoxRender($(this))}),$(document).on("focus",".lang-editor-box input, textarea",function(){var e=$(this).closest(".lang-editor-box"),t=e.find(".sub");$(t).is(":hidden")&&$(t).slideDown("fast")}),System.import("xecore:/common/js/validator").then(function(e){e.put("langrequired",function(t,a){var n=t.closest(".lang-editor-box").find("input[name^='xe_lang_preprocessor']:not(:hidden):first");return e.validators.required(n,a)})})})}]);