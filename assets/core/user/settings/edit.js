!function(e){function t(a){if(n[a])return n[a].exports;var l=n[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,t),l.l=!0,l.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=31)}({31:function(e,t,n){e.exports=n(32)},32:function(e,t,n){"use strict";var a=function(e,t){var n,a=t(),l=[],i="",s="",r={},o=function(){a.on("click",".btnDeleteEmail",function(e){e.preventDefault(),t(this).css({display:"none"}).siblings().css({display:"inline-block"})}),a.on("click",".btnDeleteEmailConfirm",function(e){e.preventDefault();var a=t(this),l=a.closest("li.list-group-item").find("[name=email]").val();n.delete(l)}),a.on("click",".btnDeleteEmailCancle",function(e){e.preventDefault(),t(this).siblings().andSelf().css({display:"none"}).parent().find(".btnDelete").css({display:"inline-block"})}),a.on("click","#__xe_emailAddBtn",function(){var e=t("#__xe_addedEmailInput"),a=e.val();a&&(e.val(""),n.add(a))}),a.on("change","[name=email]",function(e){var n=t(this),a=n.closest("li.list-group-item"),l=a.closest("ul");a.siblings().each(function(){var e=t(this);if(!e.find("> span.pull-right").length){var n='<span class="pull-right">';n+='<a href="#" class="btn btn-sm btn-link btnDeleteEmail" style="display: inline-block;">삭제</a>',n+='<a href="#" class="btn btn-sm btn-link btnDeleteEmailConfirm" style="display: none;">삭제확인</a>',n+='<a href="#" class="btn btn-sm btn-link btnDeleteEmailCancle" style="display: none;">취소</a>',n+="</span>",e.append(n)}}),a.find("> span.pull-right").length>0&&a.find("> span.pull-right").remove(),l.prepend(a.detach())})};return{init:function(e){return n=this,a=e.$wrapper,i=e.email,s=e.userId,r=e.url,o(),n.getEmailList(),this},getEmailList:function(){t.ajax({url:r.mail.list,type:"get",dataType:"json",data:{userId:s},context:this,success:function(e){l=e.mails,n.render(e.mails)},error:function(t){e.toast("danger","오류!.",".__xe_alertEmailModal")}})},delete:function(a){t.ajax({url:r.mail.delete,type:"post",dataType:"json",data:{userId:s,address:a},context:this,success:function(t){var i=l.indexOf(a);l.splice(i,1),n.render(l),e.toast("success","삭제하였습니다.",".__xe_alertEmailModal")},error:function(t){e.toast("danger",t.responseJSON.message,".__xe_alertEmailModal")}})},add:function(a){t.ajax({url:r.mail.add,type:"post",dataType:"json",data:{userId:s,address:a},context:this,success:function(t){var a=t.mail;l.push(a),n.render(l),e.toast("success","추가되었습니다.",".__xe_alertEmailModal")},error:function(t){e.toast("danger",t.responseJSON.message,".__xe_alertEmailModal")}})},render:function(e){var t="";t+="<div>",e.length>0&&(t+='<ul class="list-group">',e.forEach(function(e,n){var a=e.address,l=a===i?'checked="checked"':"";t+='<li class="list-group-item clearfix">',t+='<label><input type="radio" name="email" value="'+a+'" '+l+"/> "+a+"</label>",e.address!==i&&(t+='<span class="pull-right">',t+='<a href="#" class="btn btn-sm btn-link btnDeleteEmail" style="display: inline-block;">삭제</a>',t+='<a href="#" class="btn btn-sm btn-link btnDeleteEmailConfirm" style="display: none;">삭제확인</a>',t+='<a href="#" class="btn btn-sm btn-link btnDeleteEmailCancle" style="display: none;">취소</a>',t+="</span>"),t+="</li>"}),t+="</ul>"),t+='<div class="input-group input-group-sm" style="margin-bottom: 20px;">',t+='<input type="text" class="form-control" id="__xe_addedEmailInput" placeholder="이메일을 입력하세요">',t+='<span class="input-group-btn"><buttion id="__xe_emailAddBtn" class="btn btn-default" type="button">추가</buttion></span>',t+="</div>",a.html(t)}}}(window.XE,window.jQuery);window.jQuery(function(e){e(".__xe_settingEmail").click(function(){e(".__xe_emailView").slideToggle(),e("#__xe_emailSetting").slideToggle()}),a.init({$wrapper:e("#__xe_emailSetting"),url:window.url,userId:e("#__xe_emailSetting").data("user-id"),email:e("#__xe_emailSetting").data("email")})})}});